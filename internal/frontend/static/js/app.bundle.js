(()=>{var ue=Object.defineProperty,be=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var se=(e,a,o)=>a in e?ue(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,g=(e,a)=>{for(var o in a||(a={}))ve.call(a,o)&&se(e,o,a[o]);if(te)for(var o of te(a))ge.call(a,o)&&se(e,o,a[o]);return e},N=(e,a)=>be(e,fe(a));function q(){let{useState:e,useEffect:a}=React,[o,i]=e(window.location.hash||"#/");return a(()=>{let n=()=>i(window.location.hash||"#/");return window.addEventListener("hashchange",n),()=>window.removeEventListener("hashchange",n)},[]),o}var he={async request(e,a={}){let o=a.headers||{};!(typeof FormData!="undefined"&&a.body instanceof FormData)&&!o["Content-Type"]&&(o["Content-Type"]="application/json");let n=await fetch(e,N(g({},a),{headers:o,credentials:"include"}));if(n.status===401)throw new Error("unauthorized");if(n.status===204)return null;let t=await n.json().catch(()=>({}));if(!n.ok)throw new Error(t.error||"HTTP "+n.status);return t},get(e,a){return this.request(e,a)},post(e,a){let o=typeof FormData!="undefined"&&a instanceof FormData;return this.request(e,o?{method:"POST",body:a}:{method:"POST",body:JSON.stringify(a)})},put(e,a){let o=typeof FormData!="undefined"&&a instanceof FormData;return this.request(e,o?{method:"PUT",body:a}:{method:"PUT",body:JSON.stringify(a)})},patch(e,a){let o=typeof FormData!="undefined"&&a instanceof FormData;return this.request(e,o?{method:"PATCH",body:a}:{method:"PATCH",body:JSON.stringify(a)})},del(e){return this.request(e,{method:"DELETE"})}},b=he;function H(){let{useState:e,useEffect:a}=React,[o,i]=e({googleEnabled:!1,oidcEnabled:!1,devLogin:!1}),[n,t]=e(null),[d,r]=e(localStorage.getItem("theme")||"dark");return a(()=>{document.documentElement.setAttribute("data-bs-theme",d),localStorage.setItem("theme",d)},[d]),a(()=>{fetch("/api/config").then(c=>c.json()).then(i).catch(()=>{})},[]),a(()=>{b.get("/api/user").then(t).catch(()=>t(null))},[]),{config:o,user:n,setUser:t,theme:d,setTheme:r}}function A({user:e,size:a=32,className:o="",title:i=""}){let{name:n,avatar_url:t}=e||{},d={width:a+"px",height:a+"px",borderRadius:"50%",objectFit:"cover"};if(t)return React.createElement("img",{src:t,style:d,className:o,alt:n,title:i||n});let r=n?n.charAt(0).toUpperCase():"?",c=N(g({},d),{backgroundColor:"#6c757d",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:a/2+"px",fontWeight:"bold"});return React.createElement("div",{style:c,className:o,title:i||n},r)}function J({theme:e,setTheme:a,user:o}){let{useState:i,useEffect:n}=React,[t,d]=i(!1);return n(()=>{let r=()=>{try{let f=(window.location.hash||"#/").split("?")[0]||"#/";d(!(f==="#/"||f==="#"))}catch(c){d(!1)}};return r(),window.addEventListener("hashchange",r),()=>window.removeEventListener("hashchange",r)},[]),React.createElement("nav",{className:"navbar sticky-top bg-body-tertiary border-bottom"},React.createElement("div",{className:"container-fluid px-3 d-flex align-items-center"},t?React.createElement("button",{className:"btn btn-link text-decoration-none me-2 d-flex align-items-center",type:"button",onClick:()=>window.history.back()},React.createElement("i",{className:"fa-solid fa-chevron-left me-1"}),React.createElement("span",null,"Back")):React.createElement("div",{className:"dropdown me-2"},React.createElement("button",{className:"btn btn-link text-decoration-none d-flex align-items-center",type:"button","data-bs-toggle":"dropdown"},React.createElement("i",{className:"fa-solid fa-ellipsis"})),React.createElement("div",{className:"dropdown-menu dropdown-menu-start p-2"},React.createElement("button",{className:"dropdown-item",type:"button",onClick:()=>a(e==="dark"?"light":"dark")},React.createElement("i",{className:e==="dark"?"fa-solid fa-sun me-2":"fa-solid fa-moon me-2"}),e==="dark"?"Light theme":"Dark theme"),o&&React.createElement(React.Fragment,null,React.createElement("div",{className:"dropdown-divider"}),React.createElement("a",{href:"#/cat/new",className:"dropdown-item"},React.createElement("i",{className:"fa-solid fa-plus me-2"}),"Add cat"),React.createElement("a",{href:"#/upcoming",className:"dropdown-item"},React.createElement("i",{className:"fa-solid fa-calendar-day me-2"}),"Upcoming"),React.createElement("a",{href:"#/me",className:"dropdown-item"},React.createElement("i",{className:"fa-solid fa-user me-2"}),"My profile")))),React.createElement("a",{className:"navbar-brand fw-bold d-flex align-items-center mx-auto",href:"#/"},React.createElement("i",{className:"fa-solid fa-cat me-2"}),React.createElement("span",null,"CatWatch")),React.createElement("div",{className:"d-flex align-items-center"},o?React.createElement("a",{href:"#/me",className:"d-inline-flex align-items-center justify-content-center ms-1"},React.createElement(A,{user:o,size:32,className:"border"})):React.createElement("a",{href:"#/signin",className:"btn btn-link text-decoration-none"},React.createElement("i",{className:"fa-solid fa-user"})))))}async function G(e,a,o,i,n,t,d){if(!a){window.location.hash="#/signin";return}let r=!!o,c=Number(i)||0,f=!r;n(f),t(c+(f?1:-1));try{let h=await b.post(`/api/cats/${e}/like`,{});h&&(typeof h.liked=="boolean"&&n(h.liked),typeof h.likes=="number"&&t(h.likes),r&&!h.liked&&d&&d(e))}catch(h){n(r),t(c),alert("Error: "+h.message)}}function z(e,a=300,o=30){let i=React.useRef({t:0,x:0,y:0});return React.useCallback(n=>{try{let t=Date.now(),d=n.clientX||n.changedTouches&&n.changedTouches[0]&&n.changedTouches[0].clientX||0,r=n.clientY||n.changedTouches&&n.changedTouches[0]&&n.changedTouches[0].clientY||0,c=i.current,f=t-(c.t||0),h=d-(c.x||0),m=r-(c.y||0),u=h*h+m*m;if((n.pointerType==="touch"||n.type&&n.type.indexOf("touch")===0)&&f>0&&f<a&&u<o*o){n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation();try{e&&e(n)}catch(w){}i.current={t:0,x:0,y:0}}else i.current={t,x:d,y:r}}catch(t){}},[e,a,o])}function I({cat:e,user:a,onUnliked:o}){let{useState:i,useEffect:n}=React,{id:t,name:d,description:r,condition:c,need_attention:f,images:h,last_seen:m,tags:u,color:y}=e,[w,D]=i(e.likes||0),[L,F]=i(!!e.liked);n(()=>{D(e.likes||0),F(!!e.liked)},[e.id,e.likes,e.liked]);let _=x=>{x&&x.preventDefault&&x.preventDefault(),x&&x.stopPropagation&&x.stopPropagation(),G(t,a,L,w,F,D,o)},C=z(_),U=h&&h.length>0?[...h].sort((x,R)=>new Date(R.created_at)-new Date(x.created_at))[0]:null,S=x=>{switch(x){case 1:return"\u{1F640}";case 2:return"\u{1F63F}";case 3:return"\u{1F63A}";case 4:return"\u{1F63D}";case 5:return"\u{1F63B}";default:return"\u{1F431}"}},T=x=>{switch(x){case 1:return"Very Bad";case 2:return"Bad";case 3:return"Normal";case 4:return"Good";case 5:return"Excellent";default:return"Unknown"}},E=f?React.createElement("span",{className:"badge bg-danger me-1"},"\u26A0\uFE0F Needs attention"):null;return React.createElement("div",{className:"card h-100 shadow-sm border-0 bg-body-tertiary overflow-hidden"},React.createElement("div",{className:"position-relative",style:{height:"200px",backgroundColor:"#333"}},U?React.createElement("img",{src:`/api/cats/${t}/images/${U.id}`,className:"card-img-top w-100 h-100 object-fit-cover",alt:d,onPointerUp:C,onDoubleClick:_,style:{touchAction:"manipulation"}}):React.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center text-secondary"},React.createElement("i",{className:"fa-solid fa-cat fa-4x opacity-25"})),React.createElement("div",{className:"position-absolute top-0 end-0 p-2 d-flex flex-column gap-2 align-items-end",style:{zIndex:10}},React.createElement("span",{className:"badge bg-dark bg-opacity-75 fs-6"},S(c)," ",T(c))),React.createElement("div",{className:"position-absolute bottom-0 end-0 m-2",style:{zIndex:20}},React.createElement("span",{role:"button",tabIndex:0,className:(a?"bg-body-secondary bg-opacity-75":"bg-secondary bg-opacity-25")+" px-2 py-1 small rounded-1 d-inline-flex align-items-center",style:{userSelect:"none",cursor:a?"pointer":"default"},onClick:_,title:a?L?"Remove like":"Like":"Sign in to like"},React.createElement("i",{className:"fa-solid fa-heart me-1 "+(L||w>0?"text-danger":"text-secondary")}),React.createElement("span",null,w)))),React.createElement("div",{className:"card-body d-flex flex-column"},React.createElement("h5",{className:"card-title fw-bold mb-1"},React.createElement("a",{href:`#/cat/view/${t}`,className:"text-decoration-none text-reset"},d)),React.createElement("div",{className:"mb-2"},E,y&&React.createElement("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary border-opacity-25 me-1"},y),u&&u.map(x=>React.createElement("span",{key:x.id,className:"badge bg-secondary me-1"},"#",x.name))),React.createElement("p",{className:"card-text small text-secondary flex-grow-1 text-truncate-2"},r||"No description provided."),React.createElement("div",{className:"mt-2 pt-2 border-top d-flex justify-content-between align-items-center"},React.createElement("span",{className:"small text-body-tertiary"},React.createElement("i",{className:"fa-solid fa-clock me-1"}),m?new Date(m).toLocaleDateString():"Never seen"),React.createElement("a",{href:`#/cat/view/${t}`,className:"btn btn-primary btn-sm rounded-pill px-3"},"Details"))))}function Y({user:e}){let{useState:a,useEffect:o}=React,[i,n]=a([]),[t,d]=a(!0),[r,c]=a(null);return o(()=>{b.get("/api/cats/").then(f=>{n(f),d(!1)}).catch(f=>{c(f.message),d(!1)})},[]),t?React.createElement("div",{className:"text-center py-5"},React.createElement("div",{className:"spinner-border text-primary",role:"status"},React.createElement("span",{className:"visually-hidden"},"Loading..."))):r?React.createElement("div",{className:"alert alert-danger",role:"alert"},"Error loading cats: ",r):React.createElement("div",null,React.createElement("div",{className:"d-flex justify-content-end align-items-center mb-4"},e&&React.createElement("a",{href:"#/cat/new",className:"btn btn-primary rounded-pill px-4"},React.createElement("i",{className:"fa-solid fa-plus me-2"}),"Add New Cat")),i.length===0?React.createElement("div",{className:"text-center py-5 bg-body-tertiary rounded-4"},React.createElement("i",{className:"fa-solid fa-cat fa-4x mb-3 opacity-25"}),React.createElement("p",{className:"lead text-secondary"},"No cats found in the registry.")):React.createElement("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4"},i.map(f=>React.createElement("div",{key:f.id,className:"col"},React.createElement(I,{cat:f,user:e})))))}function Q(e,a=[]){let{useEffect:o}=React;o(()=>{let i=e&&"current"in e?e.current:null;if(!i||typeof bootstrap=="undefined"||!bootstrap.Carousel)return;let n=bootstrap.Carousel.getInstance(i)||new bootstrap.Carousel(i,{interval:!1,ride:!1,touch:!0,keyboard:!0,pause:!1,wrap:!0}),t=()=>{try{n.pause&&n.pause()}catch(d){}};return i.addEventListener("slide.bs.carousel",t),i.addEventListener("slid.bs.carousel",t),i.addEventListener("mouseenter",t),i.addEventListener("touchstart",t,{passive:!0}),()=>{try{n.dispose&&n.dispose()}catch(d){}i.removeEventListener("slide.bs.carousel",t),i.removeEventListener("slid.bs.carousel",t),i.removeEventListener("mouseenter",t),i.removeEventListener("touchstart",t)}},a)}var oe=e=>{switch(e){case 1:return"\u{1F640}";case 2:return"\u{1F63F}";case 3:return"\u{1F63A}";case 4:return"\u{1F63D}";case 5:return"\u{1F63B}";default:return"\u{1F431}"}},ne=e=>{switch(e){case 1:return"Very Bad";case 2:return"Bad";case 3:return"Normal";case 4:return"Good";case 5:return"Excellent";default:return"Unknown"}};function X({catId:e,user:a}){let{useState:o,useEffect:i,useRef:n}=React,[t,d]=o(null),[r,c]=o(!0),[f,h]=o(null),[m,u]=o(!1),[y,w]=o(!1),[D,L]=o(!1),[F,_]=o(!1),[C,U]=o({type:"feeding",note:"",planned_at:""}),[S,T]=o({name:"",description:"",lat:"",lon:""}),[E,x]=o({condition:3,note:"Observation via Web UI"}),[R,l]=o(0),[v,k]=o(!1),O=n(null),V=n(null);Q(O,[t&&t.id]);let j=s=>{s&&s.stopPropagation&&s.stopPropagation(),G(e,a,v,R,k,l)},ie=z(j),P=()=>{b.get(`/api/cats/${e}/`).then(s=>{d(s),l(s.likes||0),k(!!s.liked),x(p=>N(g({},p),{condition:s.condition})),c(!1)}).catch(s=>{h(s.message),c(!1)})};i(()=>{P()},[e]);let le=()=>{V.current.click()},re=async s=>{let p=s.target.files;if(!(!p||p.length===0)){u(!0);try{for(let $=0;$<p.length;$++){let B=new FormData;B.append("file",p[$]),await b.post(`/api/cats/${e}/images`,B)}P()}catch($){alert("Upload failed: "+$.message)}finally{u(!1),s.target.value=""}}},W=async(s,p=null)=>{s&&s.preventDefault&&s.preventDefault();let $;p?$=N(g({},p),{done_at:new Date().toISOString()}):($=g({},C),$.planned_at?$.planned_at=new Date($.planned_at).toISOString():(delete $.planned_at,$.done_at=new Date().toISOString()));try{await b.post(`/api/cats/${e}/records`,$),p||(U({type:"feeding",note:"",planned_at:""}),w(!1)),P()}catch(B){alert("Failed to add record: "+B.message)}},de=async s=>{s.preventDefault();try{let p={name:S.name,description:S.description,lat:parseFloat(S.lat),lon:parseFloat(S.lon)};if(isNaN(p.lat)||isNaN(p.lon))throw new Error("Invalid coordinates");await b.post(`/api/cats/${e}/locations`,p),T({name:"",description:"",lat:"",lon:""}),L(!1),P()}catch(p){alert("Failed to add location: "+p.message)}},ce=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{T(p=>N(g({},p),{lat:s.coords.latitude.toFixed(6),lon:s.coords.longitude.toFixed(6)}))},s=>{alert("Geolocation error: "+s.message)}):alert("Geolocation not supported by this browser.")},me=async s=>{try{await b.post(`/api/cats/${e}/records/${s}/done`,{}),P()}catch(p){alert("Failed to mark as done: "+p.message)}},pe=async s=>{s.preventDefault();try{await b.put(`/api/cats/${e}/`,N(g({},t),{condition:E.condition}));let p=`Condition: ${oe(E.condition)} ${ne(E.condition)}`;E.note&&E.note!=="Observation via Web UI"&&(p+=`
Note: ${E.note}`),await b.post(`/api/cats/${e}/records`,{type:"observation",note:p,timestamp:new Date().toISOString(),done_at:new Date().toISOString()}),_(!1),P()}catch(p){alert("Observation failed: "+p.message)}};return r?React.createElement("div",{className:"text-center py-5"},React.createElement("div",{className:"spinner-border text-primary",role:"status"},React.createElement("span",{className:"visually-hidden"},"Loading..."))):f?React.createElement("div",{className:"alert alert-danger"},"Error: ",f):t?React.createElement("div",{className:"row g-4"},React.createElement("div",{className:"col-12 col-lg-8"},React.createElement("div",{className:"card border-0 bg-body-tertiary shadow-sm rounded-4 overflow-hidden mb-4"},React.createElement("div",{className:"row g-0"},React.createElement("div",{className:"col-md-5 position-relative",style:{minHeight:"300px",backgroundColor:"#333"}},t.images&&t.images.length>0?React.createElement("div",{ref:O,id:"catImages",className:"carousel slide h-100","data-bs-ride":"carousel","data-bs-interval":"false","data-bs-touch":"true"},React.createElement("div",{className:"carousel-inner h-100"},[...t.images].sort((s,p)=>new Date(p.created_at)-new Date(s.created_at)).map((s,p)=>React.createElement("div",{key:s.id,className:`carousel-item h-100 ${p===0?"active":""}`},React.createElement("img",{src:`/api/cats/${t.id}/images/${s.id}`,className:"d-block w-100 h-100 object-fit-cover",alt:"...",style:{touchAction:"manipulation"},onDoubleClick:j,onPointerUp:ie})))),t.images.length>1&&React.createElement(React.Fragment,null,React.createElement("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#catImages","data-bs-slide":"prev"},React.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"})),React.createElement("button",{className:"carousel-control-next",type:"button","data-bs-target":"#catImages","data-bs-slide":"next"},React.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"})))):React.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center text-secondary"},React.createElement("i",{className:"fa-solid fa-cat fa-6x opacity-25"})),React.createElement("div",{className:"position-absolute bottom-0 end-0 m-2",style:{zIndex:20}},React.createElement("span",{role:"button",tabIndex:0,className:(a?"bg-body-secondary bg-opacity-75":"bg-secondary bg-opacity-25")+" px-2 py-1 small rounded-1 d-inline-flex align-items-center",style:{userSelect:"none",cursor:a?"pointer":"default"},onClick:j,title:a?v?"Remove like":"Like":"Sign in to like"},React.createElement("i",{className:"fa-solid fa-heart me-1 "+(v||R>0?"text-danger":"text-secondary")}),React.createElement("span",null,R)))),React.createElement("div",{className:"col-md-7"},React.createElement("div",{className:"card-body p-4"},React.createElement("div",{className:"mb-4"},React.createElement("h2",{className:"card-title fw-bold mb-1"},t.name),React.createElement("div",null,t.need_attention&&React.createElement("span",{className:"badge bg-danger me-2"},"\u26A0\uFE0F Needs attention"),t.tags&&t.tags.map(s=>React.createElement("span",{key:s.id,className:"badge bg-secondary me-1"},"#",s.name)))),React.createElement("div",{className:"mb-4 d-flex align-items-center gap-3"},React.createElement("div",null,React.createElement("h6",{className:"text-secondary text-uppercase small fw-bold mb-2"},"Condition"),React.createElement("div",{className:"fs-4"},oe(t.condition)," ",ne(t.condition)))),React.createElement("div",{className:"mb-4"},React.createElement("h6",{className:"text-secondary text-uppercase small fw-bold mb-2"},"Description"),React.createElement("p",{className:"card-text"},t.description||"No description.")),React.createElement("div",{className:"row g-3 small"},React.createElement("div",{className:"col-6"},React.createElement("div",{className:"text-secondary text-uppercase x-small fw-bold"},"Gender"),React.createElement("div",{className:"fw-bold text-capitalize"},t.gender||"Unknown")),React.createElement("div",{className:"col-6"},React.createElement("div",{className:"text-secondary text-uppercase x-small fw-bold"},"Sterilized"),React.createElement("div",{className:"fw-bold"},t.is_sterilized?"Yes":"No")),React.createElement("div",{className:"col-6"},React.createElement("div",{className:"text-secondary text-uppercase x-small fw-bold"},"Color"),React.createElement("div",{className:"fw-bold"},t.color||"Unknown")),React.createElement("div",{className:"col-6"},React.createElement("div",{className:"text-secondary text-uppercase x-small fw-bold"},"Birth Date"),React.createElement("div",{className:"fw-bold"},t.birth_date?new Date(t.birth_date).toLocaleDateString():"Unknown")),React.createElement("div",{className:"col-6"},React.createElement("div",{className:"text-secondary text-uppercase x-small fw-bold"},"Last seen"),React.createElement("div",null,t.last_seen?new Date(t.last_seen).toLocaleString():"Never")),React.createElement("div",{className:"col-6"},React.createElement("div",{className:"text-secondary text-uppercase x-small fw-bold"},"Registered"),React.createElement("div",null,new Date(t.created_at).toLocaleDateString()))))))),a&&React.createElement("div",{className:"mb-4"},React.createElement("div",{className:"d-flex gap-2 flex-wrap justify-content-center justify-content-md-start mb-3"},React.createElement("input",{type:"file",ref:V,onChange:re,className:"d-none",accept:"image/*",multiple:!0}),React.createElement("button",{className:"btn btn-outline-info btn-sm rounded-pill px-3 py-2",onClick:s=>W(s,{type:"observation",note:"Marked as seen via Web UI"})},React.createElement("i",{className:"fa-solid fa-eye me-1"})," Seen"),React.createElement("button",{className:"btn btn-outline-warning btn-sm rounded-pill px-3 py-2",onClick:s=>W(s,{type:"feeding",note:"Quick feed via Web UI"})},React.createElement("i",{className:"fa-solid fa-bowl-food me-1"})," Feed"),React.createElement("button",{className:"btn btn-outline-success btn-sm rounded-pill px-3 py-2",onClick:()=>_(!F)},React.createElement("i",{className:"fa-solid fa-magnifying-glass me-1"})," Observe"),React.createElement("button",{className:"btn btn-outline-secondary btn-sm rounded-pill px-3 py-2",onClick:le,disabled:m},m?React.createElement("span",{className:"spinner-border spinner-border-sm me-1"}):React.createElement("i",{className:"fa-solid fa-camera me-1"}),"Photo"),React.createElement("a",{href:`#/cat/edit/${t.id}`,className:"btn btn-outline-primary btn-sm rounded-pill px-3 py-2"},React.createElement("i",{className:"fa-solid fa-pen me-1"})," Edit")),F&&React.createElement("div",{className:"p-4 bg-body-tertiary rounded-4 shadow-sm border border-success border-opacity-25"},React.createElement("h6",{className:"fw-bold mb-3 text-success"},React.createElement("i",{className:"fa-solid fa-magnifying-glass me-2"}),"Quick Observation"),React.createElement("form",{onSubmit:pe},React.createElement("div",{className:"mb-3"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Condition"),React.createElement("select",{className:"form-select form-select-sm bg-dark border-0 text-white mb-2",value:E.condition,onChange:s=>x(N(g({},E),{condition:parseInt(s.target.value)}))},React.createElement("option",{value:"1"},"\u{1F640} 1 - Very Bad"),React.createElement("option",{value:"2"},"\u{1F63F} 2 - Bad"),React.createElement("option",{value:"3"},"\u{1F63A} 3 - Normal"),React.createElement("option",{value:"4"},"\u{1F63D} 4 - Good"),React.createElement("option",{value:"5"},"\u{1F63B} 5 - Excellent"))),React.createElement("div",{className:"mb-3"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Observation Note"),React.createElement("textarea",{className:"form-control form-control-sm bg-dark border-0",rows:"2",value:E.note,onChange:s=>x(N(g({},E),{note:s.target.value})),placeholder:"e.g. Looks good, seems healthy..."})),React.createElement("div",{className:"d-flex gap-2"},React.createElement("button",{type:"submit",className:"btn btn-success btn-sm flex-grow-1 rounded-pill"},"Save Observation"),React.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm rounded-pill",onClick:()=>_(!1)},"Cancel")),React.createElement("div",{className:"mt-2 text-center"},React.createElement("small",{className:"text-secondary x-small"},'Use "Photo" and "Log Sighting" buttons separately after saving if needed.'))))),React.createElement("div",{className:"card border-0 bg-body-tertiary shadow-sm rounded-4 p-4"},React.createElement("div",{className:"d-flex justify-content-between align-items-center mb-3"},React.createElement("h5",{className:"fw-bold mb-0"},React.createElement("i",{className:"fa-solid fa-location-dot me-2 text-primary"}),"Sightings"),a&&React.createElement("button",{className:"btn btn-outline-primary btn-sm rounded-pill",onClick:()=>L(!D)},React.createElement("i",{className:`fa-solid ${D?"fa-xmark":"fa-plus"} me-1`}),D?"Cancel":"Log Sighting")),D&&React.createElement("form",{onSubmit:de,className:"mb-4 p-3 bg-dark-subtle rounded-3 shadow-sm border border-secondary border-opacity-25"},React.createElement("div",{className:"row g-2 mb-2"},React.createElement("div",{className:"col-6"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Lat"),React.createElement("input",{type:"number",step:"any",className:"form-control form-control-sm bg-dark border-0",value:S.lat,onChange:s=>T(N(g({},S),{lat:s.target.value})),required:!0})),React.createElement("div",{className:"col-6"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Lon"),React.createElement("input",{type:"number",step:"any",className:"form-control form-control-sm bg-dark border-0",value:S.lon,onChange:s=>T(N(g({},S),{lon:s.target.value})),required:!0}))),React.createElement("div",{className:"mb-2"},React.createElement("button",{type:"button",className:"btn btn-info btn-sm w-100 rounded-pill",onClick:ce},React.createElement("i",{className:"fa-solid fa-location-crosshairs me-1"})," Get Current Location")),React.createElement("div",{className:"mb-2"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Location Name (optional)"),React.createElement("input",{type:"text",className:"form-control form-control-sm bg-dark border-0",value:S.name,onChange:s=>T(N(g({},S),{name:s.target.value})),placeholder:"e.g. Garden, Park..."})),React.createElement("div",{className:"mb-3"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Note (optional)"),React.createElement("textarea",{className:"form-control form-control-sm bg-dark border-0",rows:"2",value:S.description,onChange:s=>T(N(g({},S),{description:s.target.value})),placeholder:"Describe the place..."})),React.createElement("button",{type:"submit",className:"btn btn-success btn-sm w-100 rounded-pill"},"Save Sighting")),t.locations&&t.locations.length>0?React.createElement("div",{className:"list-group list-group-flush bg-transparent"},t.locations.sort((s,p)=>new Date(p.created_at)-new Date(s.created_at)).map(s=>React.createElement("div",{key:s.id,className:"list-group-item bg-transparent border-secondary border-opacity-25 px-0 py-3"},React.createElement("div",{className:"d-flex justify-content-between"},React.createElement("h6",{className:"mb-1"},s.name||`Location at ${s.lat.toFixed(4)}, ${s.lon.toFixed(4)}`),React.createElement("span",{className:"text-secondary small"},new Date(s.created_at).toLocaleString())),s.description&&React.createElement("p",{className:"mb-1 small text-secondary"},s.description),React.createElement("a",{href:`https://www.google.com/maps/search/?api=1&query=${s.lat},${s.lon}`,target:"_blank",className:"btn btn-link btn-sm p-0 text-decoration-none"},"View on Maps")))):React.createElement("p",{className:"text-secondary mb-0"},"No locations recorded."))),React.createElement("div",{className:"col-12 col-lg-4"},React.createElement("div",{className:"card border-0 bg-body-tertiary shadow-sm rounded-4 p-4 h-100"},React.createElement("div",{className:"d-flex justify-content-between align-items-center mb-3"},React.createElement("h5",{className:"fw-bold mb-0"},React.createElement("i",{className:"fa-solid fa-clipboard-list me-2 text-primary"}),"Journal"),a&&React.createElement("button",{className:"btn btn-primary btn-sm rounded-pill",onClick:()=>w(!y)},React.createElement("i",{className:`fa-solid ${y?"fa-xmark":"fa-plus"} me-1`}),y?"Cancel":"Add Entry")),y&&React.createElement("form",{onSubmit:W,className:"mb-4 p-3 bg-dark-subtle rounded-3 shadow-sm border border-secondary border-opacity-25"},React.createElement("div",{className:"mb-2"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Type"),React.createElement("select",{className:"form-select form-select-sm bg-dark border-0",value:C.type,onChange:s=>U(N(g({},C),{type:s.target.value}))},React.createElement("option",{value:"feeding"},"Feeding"),React.createElement("option",{value:"observation"},"Observation"),React.createElement("option",{value:"medical"},"Medical"),React.createElement("option",{value:"vaccination"},"Vaccination"),React.createElement("option",{value:"vet_visit"},"Vet Visit"),React.createElement("option",{value:"sterilization"},"Sterilization"),React.createElement("option",{value:"medication"},"Medication"))),React.createElement("div",{className:"mb-2"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Note"),React.createElement("textarea",{className:"form-control form-control-sm bg-dark border-0",rows:"2",value:C.note,onChange:s=>U(N(g({},C),{note:s.target.value})),placeholder:"Describe what happened..."})),React.createElement("div",{className:"mb-3"},React.createElement("label",{className:"form-label x-small fw-bold text-uppercase"},"Planned Time (optional)"),React.createElement("input",{type:"datetime-local",className:"form-control form-control-sm bg-dark border-0",value:C.planned_at,onChange:s=>U(N(g({},C),{planned_at:s.target.value}))})),React.createElement("button",{type:"submit",className:"btn btn-success btn-sm w-100 rounded-pill"},"Save Entry")),t.records&&t.records.length>0?React.createElement("div",{className:"timeline"},[...t.records].sort((s,p)=>new Date(p.timestamp||p.created_at)-new Date(s.timestamp||s.created_at)).map(s=>React.createElement("div",{key:s.id,className:"mb-4 position-relative ps-4 border-start border-secondary border-opacity-50"},React.createElement("div",{className:"position-absolute start-0 top-0 translate-middle-x bg-body-tertiary border border-secondary p-1 rounded-circle",style:{marginLeft:"-1px"}},React.createElement("div",{className:`rounded-circle ${s.done_at?"bg-success":"bg-warning"}`,style:{width:"8px",height:"8px"}})),React.createElement("div",{className:"d-flex justify-content-between align-items-start mb-1"},React.createElement("div",null,React.createElement("span",{className:"fw-bold text-capitalize"},s.type.replace("_"," ")),!s.done_at&&s.planned_at&&a&&React.createElement("button",{className:"btn btn-link btn-sm text-success p-0 ms-2 text-decoration-none x-small",onClick:()=>me(s.id)},React.createElement("i",{className:"fa-solid fa-check me-1"}),"Mark Done")),React.createElement("span",{className:"x-small text-secondary"},new Date(s.done_at||s.planned_at||s.timestamp).toLocaleString())),s.note&&React.createElement("p",{className:"small text-secondary mb-0"},s.note),s.done_at&&React.createElement("span",{className:"badge bg-success-subtle text-success border border-success border-opacity-25 x-small"},"Completed"),s.planned_at&&!s.done_at&&React.createElement("span",{className:"badge bg-warning-subtle text-warning border border-warning border-opacity-25 x-small"},"Planned")))):React.createElement("p",{className:"text-secondary mb-0"},"No journal entries yet.")))):null}function M({catId:e,user:a}){let{useState:o,useEffect:i,useRef:n}=React,[t,d]=o({name:"",description:"",color:"",birth_date:"",condition:3,gender:"unknown",is_sterilized:!1,need_attention:!1,tags:[],images:[]}),[r,c]=o(""),[f,h]=o(!!e),[m,u]=o(!1),[y,w]=o(!1),[D,L]=o(null),F=n(null),_=()=>{e&&b.get(`/api/cats/${e}/`).then(l=>{l.birth_date&&(l.birth_date=l.birth_date.substring(0,10)),d(N(g({},l),{tags:l.tags||[],images:l.images||[],color:l.color||"",description:l.description||"",gender:l.gender||"unknown",birth_date:l.birth_date||""})),h(!1)}).catch(l=>{L(l.message),h(!1)})};if(i(()=>{_()},[e]),f)return React.createElement("div",{className:"text-center py-5"},React.createElement("div",{className:"spinner-border"}));let C=l=>{let{name:v,value:k,type:O,checked:V}=l.target;d(j=>N(g({},j),{[v]:O==="checkbox"?V:v==="condition"?parseInt(k):k}))},U=l=>{l.key==="Enter"&&r.trim()&&(l.preventDefault(),(t.tags||[]).find(k=>k.name.toLowerCase()===r.trim().toLowerCase())||d(k=>N(g({},k),{tags:[...k.tags||[],{name:r.trim()}]})),c(""))},S=l=>{d(v=>N(g({},v),{tags:(v.tags||[]).filter(k=>k.name!==l)}))},T=async l=>{l.preventDefault(),u(!0),L(null);try{let v=g({},t);if(v.birth_date?v.birth_date=new Date(v.birth_date).toISOString():delete v.birth_date,e)await b.put(`/api/cats/${e}/`,v);else{let k=await b.post("/api/cats/",v);window.location.hash=`#/cat/view/${k.id}`;return}window.location.hash=`#/cat/view/${e}`}catch(v){L(v.message),u(!1)}},E=async l=>{let v=l.target.files;if(!(!v||v.length===0)){w(!0);try{for(let k=0;k<v.length;k++){let O=new FormData;O.append("file",v[k]),await b.post(`/api/cats/${e}/images`,O)}_()}catch(k){alert("Upload failed: "+k.message)}finally{w(!1),l.target.value=""}}},x=async l=>{if(confirm("Are you sure you want to delete this photo?"))try{await b.del(`/api/cats/${e}/images/${l}`),_()}catch(v){alert("Delete failed: "+v.message)}},R=async()=>{if(confirm("Are you sure you want to delete this cat? This action is reversible but the cat will disappear from the list.")){u(!0);try{await b.del(`/api/cats/${e}/`),window.location.hash="#/"}catch(l){L(l.message),u(!1)}}};return React.createElement("div",{className:"row justify-content-center"},React.createElement("div",{className:"col-12 col-md-10 col-lg-8"},React.createElement("div",{className:"card border-0 bg-body-tertiary shadow-sm rounded-4 p-4 p-md-5"},React.createElement("h2",{className:"fw-bold mb-4"},e?"Edit Cat":"Add New Cat"),D&&React.createElement("div",{className:"alert alert-danger"},D),React.createElement("form",{onSubmit:T},React.createElement("div",{className:"row g-3"},React.createElement("div",{className:"col-12"},React.createElement("label",{className:"form-label text-secondary text-uppercase small fw-bold"},"Name"),React.createElement("input",{type:"text",name:"name",className:"form-control form-control-lg bg-dark border-0 rounded-3",value:t.name,onChange:C,required:!0,placeholder:"Cat's name"})),React.createElement("div",{className:"col-12"},React.createElement("label",{className:"form-label text-secondary text-uppercase small fw-bold"},"Description"),React.createElement("textarea",{name:"description",className:"form-control bg-dark border-0 rounded-3",rows:"3",value:t.description,onChange:C,placeholder:"Physical features, behavior, etc."})),React.createElement("div",{className:"col-md-6"},React.createElement("label",{className:"form-label text-secondary text-uppercase small fw-bold"},"Color"),React.createElement("input",{type:"text",name:"color",className:"form-control bg-dark border-0 rounded-3",value:t.color||"",onChange:C,placeholder:"e.g. Black, Ginger, Tortie"})),React.createElement("div",{className:"col-md-6"},React.createElement("label",{className:"form-label text-secondary text-uppercase small fw-bold"},"Birth Date"),React.createElement("input",{type:"date",name:"birth_date",className:"form-control bg-dark border-0 rounded-3",value:t.birth_date||"",onChange:C})),React.createElement("div",{className:"col-md-6"},React.createElement("label",{className:"form-label text-secondary text-uppercase small fw-bold"},"Condition"),React.createElement("select",{name:"condition",className:"form-select bg-dark border-0 rounded-3 text-white",value:t.condition,onChange:C},React.createElement("option",{value:"1"},"\u{1F640} 1 - Very Bad"),React.createElement("option",{value:"2"},"\u{1F63F} 2 - Bad"),React.createElement("option",{value:"3"},"\u{1F63A} 3 - Normal"),React.createElement("option",{value:"4"},"\u{1F63D} 4 - Good"),React.createElement("option",{value:"5"},"\u{1F63B} 5 - Excellent"))),React.createElement("div",{className:"col-md-6"},React.createElement("label",{className:"form-label text-secondary text-uppercase small fw-bold"},"Gender"),React.createElement("select",{name:"gender",className:"form-select bg-dark border-0 rounded-3",value:t.gender,onChange:C},React.createElement("option",{value:"unknown"},"Unknown"),React.createElement("option",{value:"male"},"Male"),React.createElement("option",{value:"female"},"Female"))),React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"form-check form-switch mt-2"},React.createElement("input",{className:"form-check-input",type:"checkbox",name:"is_sterilized",id:"chkSterilized",checked:t.is_sterilized,onChange:C}),React.createElement("label",{className:"form-check-label",htmlFor:"chkSterilized"},"Sterilized"))),React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"form-check form-switch mt-2"},React.createElement("input",{className:"form-check-input",type:"checkbox",name:"need_attention",id:"chkAttention",checked:t.need_attention,onChange:C}),React.createElement("label",{className:"form-check-label",htmlFor:"chkAttention"},"Needs attention \u26A0\uFE0F"))),React.createElement("div",{className:"col-12"},React.createElement("label",{className:"form-label text-secondary text-uppercase small fw-bold"},"Tags"),React.createElement("input",{type:"text",className:"form-control bg-dark border-0 rounded-3 mb-2",value:r,onChange:l=>c(l.target.value),onKeyDown:U,placeholder:"Type tag and press Enter"}),React.createElement("div",null,(t.tags||[]).map(l=>React.createElement("span",{key:l.name,className:"badge bg-secondary me-1 py-2 px-3 rounded-pill"},"#",l.name,React.createElement("button",{type:"button",className:"btn-close btn-close-white ms-2",style:{fontSize:"0.5rem"},onClick:()=>S(l.name)}))))),e&&React.createElement("div",{className:"col-12 mt-4"},React.createElement("div",{className:"d-flex justify-content-between align-items-center mb-2"},React.createElement("label",{className:"form-label text-secondary text-uppercase small fw-bold mb-0"},"Photos"),React.createElement("button",{type:"button",className:"btn btn-outline-primary btn-sm rounded-pill px-3",onClick:()=>F.current.click(),disabled:y},React.createElement("i",{className:"fa-solid fa-plus me-1"})," ",y?"Uploading...":"Add Photo")),React.createElement("input",{type:"file",ref:F,className:"d-none",accept:"image/*",multiple:!0,onChange:E}),React.createElement("div",{className:"row g-2"},t.images&&t.images.length>0?t.images.map(l=>React.createElement("div",{key:l.id,className:"col-4 col-md-3 col-lg-2"},React.createElement("div",{className:"position-relative ratio ratio-1x1 rounded-3 overflow-hidden bg-dark"},React.createElement("img",{src:`/api/cats/${e}/images/${l.id}`,className:"object-fit-cover w-100 h-100",alt:""}),React.createElement("div",{className:"position-absolute top-0 end-0 m-1",style:{zIndex:10}},React.createElement("span",{role:"button",tabIndex:0,className:"bg-body-secondary bg-opacity-75 px-1 rounded-1 d-inline-flex align-items-center text-danger shadow-sm",style:{userSelect:"none",cursor:"pointer",fontSize:"0.8rem"},onClick:()=>x(l.id),title:"Delete photo"},React.createElement("i",{className:"fa-solid fa-trash-can"})))))):React.createElement("div",{className:"col-12"},React.createElement("p",{className:"text-secondary small"},"No photos uploaded yet.")))),React.createElement("div",{className:"col-12 pt-4 d-flex gap-2 flex-wrap"},React.createElement("button",{type:"submit",className:"btn btn-primary btn-lg rounded-pill px-5",disabled:m},m?React.createElement("span",{className:"spinner-border spinner-border-sm me-2"}):null,e?"Save Changes":"Create Cat"),React.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-lg rounded-pill px-4",onClick:()=>window.history.back()},"Cancel"),e&&React.createElement("button",{type:"button",className:"btn btn-outline-danger btn-lg rounded-pill px-4 ms-md-auto",onClick:R,disabled:m},"Delete Cat")))))))}function K({user:e}){let{useState:a,useEffect:o}=React,[i,n]=a([]),[t,d]=a({}),[r,c]=a(!0),[f,h]=a(null);o(()=>{(async()=>{try{let y=new Date,w=new Date;w.setDate(y.getDate()+7);let[D,L]=await Promise.all([b.get(`/api/records/planned?start=${y.toISOString()}&end=${w.toISOString()}`),b.get("/api/cats/")]),F={};L.forEach(_=>{F[_.id]=_}),n(D),d(F),c(!1)}catch(y){h(y.message),c(!1)}})()},[]);let m=async(u,y)=>{try{await b.post(`/api/cats/${u}/records/${y}/done`,{});let w=new Date,D=new Date;D.setDate(w.getDate()+7);let L=await b.get(`/api/records/planned?start=${w.toISOString()}&end=${D.toISOString()}`);n(L)}catch(w){alert("Failed to mark as done: "+w.message)}};return r?React.createElement("div",{className:"text-center py-5"},React.createElement("div",{className:"spinner-border text-primary"})):f?React.createElement("div",{className:"alert alert-danger"},"Error: ",f):React.createElement("div",{className:"container"},React.createElement("div",{className:"d-flex justify-content-between align-items-center mb-4"},React.createElement("h2",{className:"mb-0 fw-bold"},React.createElement("i",{className:"fa-solid fa-calendar-week me-2 text-primary"}),"Upcoming Events"),React.createElement("span",{className:"badge bg-secondary rounded-pill"},i.length," events")),i.length===0?React.createElement("div",{className:"text-center py-5 bg-body-tertiary rounded-4 shadow-sm"},React.createElement("i",{className:"fa-solid fa-calendar-check fa-4x mb-3 opacity-25"}),React.createElement("p",{className:"lead text-secondary"},"No upcoming events for the next 7 days.")):React.createElement("div",{className:"card border-0 bg-body-tertiary shadow-sm rounded-4 overflow-hidden"},React.createElement("div",{className:"list-group list-group-flush bg-transparent"},i.map(u=>{let y=t[u.cat_id]||{name:"Unknown Cat"},w=new Date(u.planned_at||u.timestamp);return React.createElement("div",{key:u.id,className:"list-group-item bg-transparent border-secondary border-opacity-25 p-4"},React.createElement("div",{className:"row align-items-center g-3"},React.createElement("div",{className:"col-auto"},React.createElement("div",{className:"bg-primary bg-opacity-10 text-primary rounded-3 p-3 text-center",style:{width:"70px"}},React.createElement("div",{className:"fw-bold fs-4"},w.getDate()),React.createElement("div",{className:"x-small text-uppercase"},w.toLocaleString("en",{month:"short"})))),React.createElement("div",{className:"col"},React.createElement("div",{className:"d-flex justify-content-between align-items-start mb-1"},React.createElement("h5",{className:"mb-0 fw-bold"},React.createElement("a",{href:`#/cat/view/${u.cat_id}`,className:"text-decoration-none text-reset"},y.name),React.createElement("span",{className:"ms-2 badge bg-info-subtle text-info border border-info border-opacity-25 x-small text-capitalize"},u.type.replace("_"," "))),React.createElement("span",{className:"text-secondary small fw-bold"},React.createElement("i",{className:"fa-regular fa-clock me-1"}),w.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),u.note&&React.createElement("p",{className:"mb-0 small text-secondary fst-italic"},'"',u.note,'"'),u.recurrence&&React.createElement("div",{className:"mt-1 x-small text-info opacity-75"},React.createElement("i",{className:"fa-solid fa-arrows-rotate me-1"}),"Every ",u.interval," ",u.recurrence)),e&&React.createElement("div",{className:"col-12 col-md-auto text-md-end"},React.createElement("button",{className:"btn btn-outline-success btn-sm rounded-pill px-3",onClick:()=>m(u.cat_id,u.id)},React.createElement("i",{className:"fa-solid fa-check me-1"})," Mark Done"))))}))))}function Z({config:e}){let{googleEnabled:a,oidcEnabled:o,devLogin:i}=e;return React.createElement("div",{className:"row justify-content-center py-5"},React.createElement("div",{className:"col-12 col-sm-8 col-md-6 col-lg-4 text-center"},React.createElement("h3",{className:"mb-4"},"Sign in to CatWatch"),React.createElement("p",{className:"text-secondary mb-4"},"Choose an authorization method to manage the cat registry."),React.createElement("div",{className:"d-grid gap-3"},a&&React.createElement("a",{href:"/auth/google/login",className:"btn btn-outline-primary btn-lg py-3"},React.createElement("i",{className:"fa-brands fa-google me-2"}),"Sign in with Google"),o&&React.createElement("a",{href:"/auth/oidc/login",className:"btn btn-outline-info btn-lg py-3"},React.createElement("i",{className:"fa-solid fa-key me-2"}),"Sign in with OIDC"),i&&React.createElement("a",{href:"/auth/dev/login",className:"btn btn-outline-warning btn-lg py-3"},React.createElement("i",{className:"fa-solid fa-vial me-2"}),"Sign in with Dev Login"),!a&&!o&&!i&&React.createElement("div",{className:"alert alert-warning"},"No authorization methods are configured."))))}function ee({user:e}){let{useState:a,useEffect:o}=React,[i,n]=a([]),[t,d]=a([]),[r,c]=a(!0);o(()=>{e&&(c(!0),Promise.all([b.get("/api/user/likes"),b.get("/api/user/audit")]).then(([m,u])=>{n(m||[]),d(u||[]),c(!1)}).catch(m=>{console.error(m),c(!1)}))},[e]);let f=async()=>{try{await b.post("/api/auth/logout",{}),localStorage.removeItem("token"),window.location.hash="#/",window.location.reload()}catch(m){alert("Logout failed: "+m.message)}},h=m=>{n(u=>u.filter(y=>y.id!==m))};return e?React.createElement("div",{className:"container py-4",style:{maxWidth:"900px"}},React.createElement("div",{className:"card border-0 bg-body-tertiary shadow-sm rounded-4 p-4 mb-5"},React.createElement("div",{className:"d-flex align-items-center flex-wrap gap-4"},React.createElement(A,{user:e,size:100,className:"border shadow-sm"}),React.createElement("div",{className:"flex-grow-1"},React.createElement("h2",{className:"fw-bold mb-1"},e.name||"Volunteer"),React.createElement("p",{className:"text-secondary mb-3"},e.email),React.createElement("div",{className:"d-flex gap-2"},React.createElement("button",{className:"btn btn-outline-danger btn-sm rounded-pill px-3",onClick:f},React.createElement("i",{className:"fa-solid fa-right-from-bracket me-2"}),"Sign Out"))))),React.createElement("div",{className:"d-flex justify-content-between align-items-center mb-4"},React.createElement("h4",{className:"fw-bold mb-0"},React.createElement("i",{className:"fa-solid fa-heart text-danger me-2"}),"Favorite Cats"),React.createElement("span",{className:"badge bg-secondary rounded-pill"},i.length)),r?React.createElement("div",{className:"text-center py-5"},React.createElement("div",{className:"spinner-border text-primary"})):i.length===0?React.createElement("div",{className:"text-center py-5 bg-body-tertiary rounded-4 border border-dashed"},React.createElement("i",{className:"fa-regular fa-heart fa-3x mb-3 opacity-25"}),React.createElement("p",{className:"text-secondary lead"},"You haven't liked any cats yet."),React.createElement("a",{href:"#/",className:"btn btn-outline-primary rounded-pill px-4"},"Explore Cats")):React.createElement("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4"},i.map(m=>React.createElement("div",{key:m.id,className:"col"},React.createElement(I,{cat:m,user:e,onUnliked:h})))),React.createElement("div",{className:"d-flex justify-content-between align-items-center mt-5 mb-4"},React.createElement("h4",{className:"fw-bold mb-0"},React.createElement("i",{className:"fa-solid fa-clock-rotate-left text-primary me-2"}),"Activity Log"),React.createElement("span",{className:"badge bg-secondary rounded-pill"},t.length)),React.createElement("div",{className:"card border-0 bg-body-tertiary shadow-sm rounded-4 overflow-hidden mb-5"},React.createElement("div",{className:"table-responsive"},React.createElement("table",{className:"table table-hover mb-0"},React.createElement("thead",{className:"table-light"},React.createElement("tr",null,React.createElement("th",{className:"border-0 ps-4 small text-uppercase fw-bold text-secondary"},"Time"),React.createElement("th",{className:"border-0 small text-uppercase fw-bold text-secondary"},"Action"),React.createElement("th",{className:"border-0 text-end pe-4 small text-uppercase fw-bold text-secondary"},"Status"))),React.createElement("tbody",{className:"border-top-0"},t.map(m=>React.createElement("tr",{key:m.id},React.createElement("td",{className:"ps-4 text-secondary small align-middle"},new Date(m.ts).toLocaleString([],{dateStyle:"short",timeStyle:"short"})),React.createElement("td",{className:"align-middle"},React.createElement("div",{className:"fw-medium text-capitalize mb-0"},m.method.toLowerCase()==="post"?"Created":m.method.toLowerCase()==="put"?"Updated":m.method.toLowerCase()==="delete"?"Deleted":m.method," ",m.target_type),React.createElement("div",{className:"text-secondary x-small font-monospace",style:{fontSize:"0.75rem"}},m.route)),React.createElement("td",{className:"text-end pe-4 align-middle"},React.createElement("span",{className:`badge rounded-pill ${m.status==="success"?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`},m.status)))),t.length===0&&!r&&React.createElement("tr",null,React.createElement("td",{colSpan:"3",className:"text-center py-5 text-secondary"},React.createElement("i",{className:"fa-solid fa-ghost fa-2x mb-2 opacity-25 d-block"}),"No recent activity found."))))))):React.createElement("div",{className:"text-center py-5"},React.createElement("p",{className:"lead text-secondary"},"Please sign in to view your profile."),React.createElement("a",{href:"#/signin",className:"btn btn-primary rounded-pill px-4"},"Sign In"))}function ae(){let{useEffect:e}=React,a=q(),{config:o,user:i,setUser:n,theme:t,setTheme:d}=H();e(()=>{i||b.get("/api/user").then(n).catch(()=>{})},[a]);let r=null;if(a.startsWith("#/cat/view/")){let c=a.replace("#/cat/view/","").split("?")[0].replace(/\/$/,"");r=React.createElement(X,{key:`view-${c}`,catId:c,user:i})}else if(a.startsWith("#/cat/edit/")){let c=a.replace("#/cat/edit/","").split("?")[0].replace(/\/$/,"");r=React.createElement(M,{key:`edit-${c}`,catId:c,user:i})}else a==="#/cat/new"?r=React.createElement(M,{key:"new",user:i}):a==="#/upcoming"?r=React.createElement(K,{key:"upcoming",user:i}):a==="#/me"?r=React.createElement(ee,{key:"me",user:i}):a==="#/signin"?r=React.createElement(Z,{key:"signin",config:o}):r=React.createElement(Y,{key:"main",user:i});return React.createElement("div",null,React.createElement(J,{theme:t,setTheme:d,user:i}),React.createElement("div",{className:"container-fluid py-3"},r))}var Ne=ReactDOM.createRoot(document.getElementById("app"));Ne.render(React.createElement(ae,null));})();
//# sourceMappingURL=app.bundle.js.map
